# 1. 进程管理

## 1.1 进程查看

### 1.1.1 什么是进程

进程是正在执行的一个程序或命令，每一个进程都是一个运行的实体，都有自己的地址空间，并占用一定的系统资源。每个程序运行都至少有一个进程。所有的程序和命令都有进程。

### 1.1.2 进程管理的作用

1.  判断服务器健康状态

2.  查看系统中所有进程

3.  杀死进程

### 1.1.3 查看系统的中所有进程

-   ps aux  #查看系统的中所有进程，使用BSD（unix）操作格式

-   表头格式：
    ![](https://github.com/Missyesterday/Picture/blob/main/661539c7-6727-4e32-87bf-5742e47f391b.png?raw=true)

-   USER：用户名

-   PID：进程ID，init进程永远是1，是所有其余进程的父进程

-   %CPU: 该进程占用的CPU百分比

-   %MEM: 该进程占用的MEM百分比

-   VSZ：占用虚拟内存的大小，单位是KB

-   RSS：占用实际物理内存的大小，单位是KB

-   TTY：该进程的登陆终端，？代表由内核产生。tty1-tty7代表本地控制台终端，tty1-tty6是本地控制台终端，tty7是图形终端（可以按ctrl+alt+F7切换）。pts/0-255代表虚拟终端，也就是远程登陆。

-   STAT：进程状态。常见的状态有：R：运行、S：睡眠、T：停止状态、s：包含子进程、+：位于后台

-   START：进程启动时间。

-   TIME：进程占用CPU时间

-   **COMMAND：产生该进程的命令名**

-   ps -le #查看系统的中所有进程，使用Linux标准命令格式

### 1.1.4 查看系统的健康状态

-   top \[选项]
    \--d  秒数 #指定top命令每隔几秒更新。默认是3秒

在top命令的交互模式中可以执行的命令：

-   ？ or h ：显示交互模式的帮助

-   P：以CPU使用率排序，默认就是此项

-   M：以内存的使用率排序

-   N：以PID排序

-   q：退出

![](https://github.com/Missyesterday/Picture/blob/main/5603a530-16ee-4488-8e01-524ee534e3a3.png?raw=true)

第一行信息为任务队列信息
主要看负载和空闲CPU

-   pstree #查看进程树

## 1.2 中止进程

### 1.2.1 kill命令

kill -l #查看可用的进程信号，支持64个信号，常用：

| 信号代号 | 信号名称    | 说明   |
| ---- | ------- | ---- |
| 1    | SIGHUP  | 重启服务 |
| 2    |         |      |
| 8    |         |      |
| 9    | SIGKILL | 强制终止 |
| 14   |         |      |
| 15   | SIGTERM | 正常终止 |
| 18   |         |      |
| 19   |         |      |

例如\:kill -1 PID

### 1.2.2 killall命令

killall \[选项]\[信号] 进程名 #按照进程名kill进程&#x20;

-   \-i #交互式，询问&#x20;

-   \-I #忽略大小写

pkill #与killall类似，支持 -t 终端号 #按照终端号踢出用户

# 2. 工作管理

## 2.1、把进程放入后台

1.  在命令后加 &符（在后台运行）

2.  在命令执行过程中按下ctrl+z快捷键（在后台暂停）

## 2.2、查看后台的工作

jobs -l #显示工作的PID 注：&#x20;

-   “+”号代表最近一个放入后台的工作，也是工作恢复时，默认恢复的工作。

-   “-” 号代表倒数第二个放入后台的工作

## 2.3 将后台暂停的工作恢复执行

-   fg %工作号 将后台暂停的工作恢复到前台执行

    -   参数 %工作号 # %可以省略，但注意与PID的区别

-   bg %工作号 将后台暂停的工作恢复到后台执行

    -   后台恢复执行是不能和前台有交互

# 3. 系统资源查看

## 3.1 vmstat

vmstat \[刷新延时 刷新次数]  #监控系统资源 例如 vmstat 1 3

## 3.2 **dmesg #开机时内核检测信息**

## 3.3  **free \[-b|-k|-m|-g]  #查看内存使用状态**

1.  \-b #以字节为单位显示

2.  \-k #以KB为单位显示，默认

3.  \-m # 以MB为单位显示

4.  \-g #以GB为单位显示

> 缓存和缓冲的区别
> 简单来说缓存（chche）是用来加速数据从硬盘中“读取”的，而缓冲（buffer）是用来加速数据“写入”硬盘的。

## 3.4查看CPU 信息

dmesg ｜ grep CPU 或 cat /proc/cpuinfo ，这个文件是每次开机系统检测CPU然后重写。

## 3.5 uptime

top命令的第一行，w命令也能看

## 3.6查看系统与内核相关信息

**uname \[选项]**

-   \-a #查看系统所有相关信息，适合什么硬件平台

-   \-r #查看内核版本

-   \-s #查看内核名称

## 3.7 判断当前系统的位数

file + 一个系统外部命令，如file /bin/ls可以顺带查看操作系统位数

## 3.8 查询当前Linux系统发行版本：**lsb\_release -a**

## 3.9 列出进程调用或打开的文件的信息

lsof \[选项]

-   \-c 字符串 ：只列出以字符串开头的进程打开的文件

-   \-u 用户名：只列出某个用户的进程打开的文件

-   \-p pid ：列出某个PID进程打开的文件

# **4.系统定时任务**

## 4.1 crond服务管理与访问控制

一般有crond，没有就启动一下

-   select-editor 选择编辑器

-   crontab -e #进入crontab编辑界面，会打开vim

-   crontab -l #查看定时任务

-   crontab -r #删除所有系统

格式：`******执行的范围`
五个\*分别的含义和范围

| 项目    | 含义         | 范围            |
| ----- | ---------- | ------------- |
| 第一个\* | 一小时当中的第几分钟 | 0-59          |
| 第二个\* | 一天当中的第几个小时 | 0-23          |
| 第三个\* | 一个月当中的第几天  | 1-31          |
| 第四个\* | 一年当中的第几个月  | 1-12          |
| 第五个\* | 一周当中的星期几   | 0-7（0和7都代表周日） |

| 特殊符号&#x20; | 含义                                                          |
| ---------- | ----------------------------------------------------------- |
| \*         | 代表任何时间。比如第一个\*就代表一小时中每分钟都执行一次                               |
| ,          | 代表不连续的时间。比如“0 8,12,16 \* \* \* ”表示在每天的8点0分，12点0分，16点0分都执行一次 |
| -          | 代表连续的时间范围。比如“0 5 \* \* 1-6”命令代表周一到周六的凌晨5点0分执行命令             |
| \*/n       | 代表每隔多久执行一次。比如“\*/10 \* \* \* \* ”代表每隔10分钟就执行一次命令            |


**注意星期几和几号不要同时出现，因为他们的定义的都是天，容易引起管理员混乱。**

&#x20;举例 \:可以自动执行脚本

&#x20;`*** * * /bin/echo "11" >> /tmp/tes`t #每分钟向/tmp/test写入11 如果日期格式“date %y%m%d” 做文件名记得加上\转义符


