# 关于32位和64位

32位和64位都是程序员的常见词汇，它可以用来表示：

-   软件的32位和64位版本
-   操作系统也有32位和64位版本
-   CPU有32位CPU和64位CPU



## 32位CPU和64位CPU

在冯诺伊曼模型中，为了方便计算较大的数值，CPU每次可以计算多个字节的数据。

-   如果CPU每次可以计算4个byte，那么就是32位CPU
-   如果CPU每次可以计算8个byte，那么就是64位CPU

32位CPU能计算的最大整数已经是「2的32次方 = 4294967295」，已经非常大了。



CPU还需要和内存及其他设备之间通信，当CPU需要读写内存时，需要通过「**地址总线**」来指定内存地址，再通过「**数据总线**」来传输数据。如果CPU是32位的，那么最多只能操作4G的内存（因为CPU和内存的信号只能并行发送，串行发送太慢了）。

如果想让32位的CPU控制40位宽的地址总线、数据总线，需要双方制定协议，因此会慢很多。例如32位CPU计算64位的数字相加，可能需要分成两次来计算。但事实上，大部分应用不需要计算超过 32 位的数字。



除此之外，CPU内部还有寄存器，32位的CPU提供32位的寄存器，64位的CPU提供64位的寄存器，64位寄存器可以寻址的范围非常大，但是会收到地址总线条数的物理限制。一般64位CPU配套工作的地址总线只有40条，那么可以寻址的范围就是「2的40次方 = 1TB」。



**优点：**

1.   64 位 CPU 可以执行更大数字的运算，这个优势在普通应用上不明显，但是对于数值计算较多的应用就非常明显。
2.   64 位 CPU 可以寻址更大的内存空间。



**这里不得不提一个经典问题了：在 4G 内存的机器上，申请 8G 内存会怎么样？**

事实上是可以申请的，因为`malloc`申请的是虚拟内存，只有当程序读写这块虚拟内存的时候，如果虚拟内存没有映射到物理内存，才会分配物理内存。

具体可以看：[在 4G 内存的机器上，申请 8G 内存会怎么样？](https://mp.weixin.qq.com/s/VwdyGxUSaOrtzZSg3PJj1g)



## 32位操作系统和64位操作系统

可以通过`uname -a`查看当前系统

64位电脑虽然可以安装32位操作系统，但是32位电脑绝对不能安装64位操作系统。

## 32位软件和64位软件

在下载软件包的时候，经常要选择对应的版本，很多软件，例如MySql，安装包有`x86`和`x64`两种，对此，Microsoft官网的解释是：

>   x86 程序包适用于 32 位 Windows，x64 程序包适用于 64 位 Windows。
>
>   [应该安装x86还是x64软件包](https://support.microsoft.com/zh-cn/topic/应该安装-x86-还是-x64-程序包-34bbf9af-4f0f-3957-50ac-d1d308d5b548)



同理，64位软件不能安装到32位的机器上。